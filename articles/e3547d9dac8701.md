---
title: "Onikiri2ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦è©¦ã™"
emoji: "ğŸ™"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["cpu", "risc-v"]
published: false
---

[Onikiri2](https://github.com/onikiri/onikiri2) ã¨ã„ã†ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã™ã€‚
ã“ã®ãƒ—ãƒ­ã‚»ãƒƒã‚µã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’è§¦ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸãŸã‚ã€ãƒ“ãƒ«ãƒ‰ã‹ã‚‰å‹•ä½œç¢ºèªã¾ã§ã®æ‰‹é †ã‚’ã¾ã¨ã‚ã¾ã—ãŸã€‚

ã¨ã¯è¨€ã£ã¦ã‚‚ã€åŸºæœ¬çš„ã«ã¯ README.md ã‚„ [Wiki](https://www.mtl.t.u-tokyo.ac.jp/~onikiri2/wiki/index.php?%E4%BB%95%E6%A7%98/%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88/%E3%83%93%E3%83%AB%E3%83%89) ã«å¾“ã†ã ã‘ã§ã™ã€‚

## ãƒ“ãƒ«ãƒ‰ï¼ˆLinuxã‚’ä»®å®šï¼‰

```bash
git clone git@github.com:onikiri/onikiri2.git --recursive
cd onikiri2
```

`project/gcc/onikiri2` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ `Makefile` ãŒç½®ã„ã¦ã‚ã‚‹ã®ã§ã™ãŒã€ã“ã®ä¸­ã® `CXXFLAGS` ã« `-Wno-deprecated-declarations` ã‚’è¿½åŠ ã—ã¾ã™ã€‚
ã“ã‚Œã¯ã€ã‚³ãƒ¼ãƒ‰ä¸­ã§ deprecated ãª `std::unary_function` ãŒä½¿ã‚ã‚Œã¦ãŠã‚Šã€æ–°ã—ã„ g++ï¼ˆæ‰‹å…ƒã¯ 13.2.0ï¼‰ã ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã†ãŸã‚ã§ã™ã€‚

```diff
...
# Platform: linux
ifneq (,$(findstring Linux,$(HOST_TYPE)))
WORK_DIR = WorkLinux/
CXX = g++
- CXXFLAGS = -Wall -Werror -O2 -g -std=c++11 -DONIKIRI_DEBUG \
+ CXXFLAGS = -Wall -Werror -O2 -g -std=c++11 -DONIKIRI_DEBUG -Wno-deprecated-declarations \
        -I../../../src \
        -I../../../src/pch \
...
```

ã‚ã¨ã¯ `make` ã™ã‚‹ã ã‘ã§ã™ã€‚`project/gcc/onikiri2/a.out` ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

```bash
(cd project/gcc && make -j$(nproc))
```

## å‹•ä½œç¢ºèª

`benchmark/HelloWorld` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯ Hello World ã‚’å‡ºåŠ›ã™ã‚‹ãŸã‚ã® `main.c` ãŠã‚ˆã³ `param.xml` ãŒç½®ã„ã¦ã‚ã‚Šã¾ã™ã€‚
